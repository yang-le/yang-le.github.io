@[TOC](同伦类型论)

# 导言

同伦类型论是一个数学新分支，它令人惊奇地结合了几个不同的研究领域。它基于最新的发现，连接了同伦论和类型论。同伦论是代数拓扑和同调代数的分支，与高阶范畴论有关；而类型论则是数理逻辑和理论计算机科学的分支。虽然两者之间的连接是当前的研究热点，但越来越清楚地是它们只是一个需要花费更多时间和更多工作才能完全弄明白的课题的开端。它触及到那些看似毫不相关主题，诸如球面上的同伦群，类型检查的算法以及弱$\infty$-群胚的定义。

同伦类型论给数学的根基带来了新的想法。一方面，我们有Voevodsky妙不可言的泛等(univalence)公理。特别是，泛等公理意味着同构的结构可被视为同等。虽然与”正式“的传统基础学说不兼容，这却是一个数学家们每天都在用的原理。另一方面，我们有高阶归纳类型，它提供了对同伦论的某些基础空间和构造——球面，柱面，截断(truncations)，局部化(localizations)等——的直接的逻辑的描述。这两方面的想法都不可能直接从经典的集合论基础中得到，但是当在同伦类型论中结合在一起，它们使得一种全新的”同伦类型的逻辑“成为可能。

这表明数学基础的一种自带内蕴同伦内容的新观念，一种关于数学对象的”不变量“的观念，以及它的方便的机器实现，可以为数学工作者带来实实在在的帮助。这就是泛等基础纲领。这本书有意作为泛等基础基本概念的第一个系统性的概览，以及这种新的推理风格的例子的集合。但本书不要求读者了解或学过形式逻辑，或使用过计算机证明助手。

我们要强调的是，同伦类型论是一个年轻的领域，泛等基础还处在一个非常半成品的阶段。本书应被视为仅仅是该领域的一个方面于其写作时的”快照“，而不是整个大厦的完美总览。就如我们稍后将要简短讨论的那样，同伦类型论的许多方面都还未被完全了解——有些甚至未能在此提及。最终的理论几乎肯定不会与本书中描述的完全相像，但可以确定的是，它至少将同样地强大有力；因此我们相信泛等基础将最终成为集合论的一个可行的候补，去作为那些已被大多数数学家完成而尚未形式化的数学的”隐含的基础“。

## 类型论

类型论最初是由Bertrand Russell发明的，作为一种破解数学逻辑基础中的悖论的方法，在当时仍处于研究阶段。随后的几十年中，它被许多人进一步发展，特别是Church将其与自己的$\lambda$-演算结合在一起。虽然未被广泛地认为是经典数学的基础——集合论更适合这一位置——但类型论还是有很多应用，特别是在计算机科学和程序语言理论方面。Per Martin-Löf及许多学者发展了一种对Church的类型系统的“谓语性”的修改，现在通常被称为依赖的构造的直觉类型论，或者就简称Martin-Löf类型论。这是我们在此考虑的系统的基础。它原本是作为形式化构造性数学的一种严格的框架而被发展出来的。下文中，我们通常用“类型论”来特指这个系统和其他类似的系统，虽然类型论作为一个完整的课题要宽泛得多。

不像集合论那样，类型论中的对象是用一种类型的基础记号来分类的，类似于在程序语言中使用的数据类型。这些细化构造的类型可被用来表达对象分类的详细规范，并给出关于这些对象的推理原则。举一个简单的例子，我们知道一个积类型$A \times B$的对象有$(a, b)$这样的形式，于是我们就自然地知道如何构造和分解它们。类似地，一个函数类型$A \to B$的对象可以从一个由$A$类型的对象参数化的$B$类型的对象获得，且可以在一个$A$类型的参数处被求值。所有对象的这种严格可预测的行为（与集合论的更自由的形式化原则相反，那里允许非齐次集合）是类型论可以被广泛地用于计算机程序正确性验证的一个关键。与类型构造关联的清晰的推理原则也构成了现代计算机证明助手的基础，这被用于形式化数学和验证形式化证明的正确性。下面我们就回到类型论的这个方面。

然而，从数学视角理解类型论的一个问题在于，关于类型的基本概念不像集合那样已被精确的说明。我们相信将类型视作空间而不是奇怪的集合（可能未使用经典逻辑构造）的想法，从同伦理论的观点来看是一个明显的进步。特别是，这解决了理解相等记号在关于类型的元素之间是如何不同于在关于集合的元素之间的问题。

在同伦论中，人们在同伦的意义下考虑空间和它们之间的连续映射。一对连续映射$f: X \to Y$和$g: X \to Y$之间的同伦是一个连续映射$H: X \times [0, 1] \to Y$满足$H(x, 0) = f(x)$以及$H(x, 1) = g(x)$。同伦$H$可被认为是从$f$到$g$的“连续形变”。我们说空间$X$和$Y$是同伦等价的，$X \simeq Y$，如果它们之间存在两个方向上的连续映射，其复合同伦于对应的恒等映射，也就是说，如果它们“在同伦的意义下”同构。同伦等价的空间拥有相同的代数不变量（例如同伦或基本群），我们称它们有相同的同伦类型。

## 同伦类型论

同伦类型论从同伦的观点解释类型论。在同伦类型论中，我们将类型视为“空间”（就像在同伦论中研究的那样）或者高阶群胚，将逻辑构造（如乘积$A\times B$）视为这些空间上的同伦不变构造。通过这种方法，我们得以直接操纵空间而无需先发展点集拓扑（或其任何组合对应物，如单纯集的理论）。为了简要地说明这一观点，首先考虑类型论的基本概念，比如说项$a$的类型为$A$，它被写作
$$a: A$$
传统上，这个表达式被理解为类似于
> $a$是集合$A$中的一个元素

然而，在同伦类型论中我们要这样理解
> $a$是空间$A$中的一个点

类似地，每个函数$f: A \to B$在类型论中都被认为是从空间$A$到空间$B$的一个连续映射。

我们要强调这些“空间”是纯粹地被同伦看待的，而不是拓扑地看待。例如，我们没有关于一个类型的“开子集”或是关于一个类型的元素序列的“收敛”的记号。我们只有“同伦”记号，例如点之间的路径和路径之间的同伦，这些在其他的同伦论模型（例如单纯集）中也是适用的。因此，更准确的说法是，我们将类型视为$\infty$-群胚；这是同伦论中“不变对象”的名字，它可以由拓扑空间，单纯集或者同伦论的任何其他模型所表示。但是，有时使用诸如“空间”和“路径”这样的拓扑名词是很方便的，只要我们记得其他的拓扑概念并不适用于这里就好。

（我们也总是希望可以对这些对象使用同伦类这个词，用来表达“一个被同伦看待的类型（在类型论中）”和"一个在同伦论的视角下被考虑的空间“这种对偶解释。后者与”同伦类“——即作为空间模掉同伦等价关系的等价类——的经典含义稍有不同，虽然它确实保留了像是”这两个空间属于相同的同伦类“这样的含义。）

这种将类型解释为结构化的对象而不是集合的想法，有着悠久的渊源，且已知可被用来澄清类型论中的一些神秘的方面。例如，将类型解释为层可以帮助解释类型论逻辑的直觉本质，而将它们解释为部分等价关系或”域“可以帮助解释它的计算属性。这也意味着我们可以使用类型论推理来研究结构化的对象，这将我们引向范畴逻辑的丰富领域。（类型论的）这种同伦解释也有同样的效果：它澄清了类型论中的恒等（或等价）本质，并允许我们在同伦论研究中使用类型论推理。

同伦解释的关键的新想法在于相同类型$A$的两个对象$a, b: A$的逻辑相等记号$a = b$可被理解为在空间$A$中从点$a$到点$b$之间存在一条路径$p: a \rightsquigarrow b$。这也意味着如果两个函数$f, g: A \to B$是同伦的，则它们可被视为是同等的，因为同伦就是对应于每一个$x: A$的$B$中的一族（连续的）路径$p_x: f(x) \rightsquigarrow g(x)$。在类型论中，对于每一个类型$A$都有一个（之前多少有点神秘的）表示$A$中的两个对象恒等的类型$\mathrm{Id}_A$；在同论类型论中，这只不过是由从单位区间到$A$的所有连续映射$I \to A$所构成的路径空间$A^I$。从这个观点看，项$p: \mathrm{Id}_A(a, b)$表示$A$中的一条路径$p: a \rightsquigarrow b$。

这种同论类型论的想法在2006年左右独立地出现在Awodey和Warren的工作和Voevodsky的工作中，但受到了Hofmann和Streicher的早期的（1998年）群胚解释的启发。实际上，现在人们知道高维范畴论（特别是弱$\infty$-群胚的理论）与同伦理论有着密切的联系，这是由Grothendieck提出的且仍在被数学家们以各种方法深入地研究着。Awodey–Warren和Voevodsky的原始语义模型使用了来自同伦论的，现在也在高阶范畴论中被使用的，广为人知记号和技术，例如Quillen模型范畴和Kan单纯集。

特别地，Voevodsky在Kan单纯集中构造了一种类型论解释，并发现这个解释满足一个更严格的他称之为泛等的属性。这在之前的类型论中并未被发现（虽然Church的命题外延原则被发现是它的一个极特殊的情形，Hofmann和Streicher也在”泛外延“这个名称下考虑了另一种特殊情形）。以一个新公理的形式向类型论中加入泛等有着深远的结果，其中的许多是自然，简洁和令人信服的。泛等公理也进一步强化了类型论的同伦观点，因为它在单纯模型和其他相关模型中成立，但在将类型视为集合的观点下无法成立。

## 泛等基础

极其简化地说，泛等公理的基本想法可以解释如下。在类型论中，我们可以有这样的类型，它们的元素也是类型，这样的类型称为论域(universe)，通常记作$\mathcal U$。那些是$\mathcal U$的项的类型通常被称为小类型。就像其他类型一样，$\mathcal U$也有恒等类型$\mathrm{Id}_\mathcal U$，它表达了小类型之间的恒等关系$A = B$。把类型看作空间，$\mathcal U$就是这样一个空间，其中的每一个点本身也是一个空间；为了理解它的恒等类型，我们必须要问，什么是$\mathcal U$中的空间之间的一条路径$p: A ⇝ B$呢？泛等公理说这样的路径对应着同伦等价$A \simeq B$，（粗略来说）就像上面解释的那样。稍微准确点说，给定任意的（小）类型$A$和$B$，以及基本类型$\mathrm{Id}_\mathcal U(A, B)$为$A$和$B$的恒等类型，我们就有类型$\mathrm{Equiv}(A, B)$定义为从$A$到$B$的等价类型。由于任何对象上的恒等映射也是一个等价关系，我们就有一个典则映射
$$\mathrm{Id}_\mathcal U(A, B) \to \mathrm{Equiv}(A, B)$$
泛等公理声称这个映射自身就是一个等价关系。虽有过度简化的风险，我们可以将此简明地陈述如下：

**泛等公理：** $(A = B) \simeq (A \simeq B)$

换言之，恒等等价于等价。特别地，我们可以说“等价的类型是恒等的”。但是，这个说法多少有点误导，因为它听起来像是某种把等价记号坍缩为恒等的“骨架”条件，而实际上泛等是关于扩展恒等记号到（未改变的）等价记号的。

从同伦论的观点，泛等意味着相同同伦类型的空间是由论域$\mathcal U$中的路径连接的，这与（小）空间的分类空间的直觉相符。然而从逻辑的观点看，这可是个彻底的新想法：它声称同构的东西可被视为等同！数学家当然已经习惯了在实践中等同看待同构的结构，但他们通常是通过“滥用记号”或者其他的非正式的手段，他们知道涉及的对象“实际上”是不等同的。但是在这个新的基础概念里，这样的结构可以正式地被视作等同，从逻辑的含义上也就是涉及到其中一个的每一属性或构造也都适用于另一个。实际上，这种等同现在被显化出来了，使得属性和构造可以系统地沿之传输。更进一步地，这种等同可被构造的不同方式本身就形成了一种可被（也应该被！）研究的结构。

因此总的来说，对于论域$\mathcal U$中的点$A$和$B$（即小类型），泛等公理等同以下三种记号：
- （逻辑的）$A$与$B$的相等$p: A = B$
- （拓扑的）$\mathcal U$中从$A$到$B$的路径$p: A ⇝ B$
- （同伦的）$A$与$B$之间的等价$p: A \simeq B$

## 高阶归纳类型

处理归纳定义结构时的简单而有效的技术是类型论的一个经典优势。最简单的非平凡归纳定义结构是自然数，它是由零和后继函数归纳生成的。从此声明中我们可以算法地提取出数学归纳原理，正是它刻画了自然数。更一般的归纳定义涵盖了列表和各种有合理定义的树，每一个都由其对应的“归纳原理”所刻画。这包含了在某些编程语言中使用的大多数数据结构；因此类型论在后者的形式推理中很有用。如果我们设想非常一般的情形，归纳定义也包括诸如不交并$A + B$这样的例子，它可以视为是由两个入射$A \to A + B$和$B \to A + B$”归纳地“生成的。这种情况下”归纳原理“就是”分情况证明“，它刻画了不交并。

在同伦论里，考虑”归纳定义的空间“也是很自然的，它们不仅可由点的集合生成，也可由路径或高阶路径的集合生成。传统上，这样的空间被称作CW复形。举例来说，圆周$S^1$是由一个单点和从该点到自身的一个路径生成的。类似地，2-球面$S^2$是由一个单点$b$和一个从$b$处的常路径到其自身的二维路径生成的，而环面$T^2$是由一个单点，从该点到其自身的两条路径$p$和$q$，以及从$p\cdot q$到$q\cdot p$的二维路径生成的。

在同伦类型论中通过等式来使用路径等价，这类”归纳定义的空间“可在类型论中由”归纳原理“来刻画，这完全类比于诸如自然数和不交并这样的经典例子。由此导致的高阶归纳类型给出了一种直接的”逻辑的“方法来进行诸如球面这样的熟知空间的推理，此方法（结合泛等公理）可被用来以纯形式化的方式从同伦论的角度进行诸如计算球面的同伦群这样的类似的讨论。此种证明是经典同伦论思想和经典类型论思想的联姻，将对这两个领域给出的新洞察。

进一步地，这还只是冰山一角：许多同伦论中的抽象构造，诸如同伦余极限，suspensions，Postnikov塔，局部化，完备化和谱化也可以被表述为高阶归纳类型。其中许多已被使用Quillen的”小对象论证“经典地构造了。”小对象论证“可被视为一种算法地描述空间的一种无限CW复形表示的有限方法，就像”零和后继“是一种自然数的无限集合的有限算法描述一样。由小对象论证产生的空间罕见地复杂且难以理解；潜在地，由于通过直接给出适当的”归纳原理“而绕过了任何显示构造的需要，类型论方法要简单地多。因此，泛等公理和高阶归纳类型的结合预示着在同伦论的实践中发生某种革命的可能性。

## 泛等基础中的集合

我们已经声称泛等基础可最终作为”所有“数学的一个基础，但目前为止我们只讨论了同伦论。


